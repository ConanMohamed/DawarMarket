{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
<style>
    body {
        font-family: 'Cairo', sans-serif;
        direction: rtl;
        padding: 40px;
        color: #333;
        background-color: #fff;
    }

    h1, h2, h3 {
        color: #444;
        margin-bottom: 20px;
    }

    .section-title {
        margin-top: 30px;
        font-size: 20px;
        border-bottom: 2px solid #eee;
        padding-bottom: 5px;
        margin-bottom: 15px;
    }

    .info-block {
        margin-bottom: 20px;
    }

    .info-block strong {
        display: inline-block;
        width: 120px;
        color: #555;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        font-size: 15px;
    }

    table th, table td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: center;
    }

    table th {
        background-color: #f5f5f5;
        font-weight: bold;
    }

    .total {
        text-align: left;
        font-weight: bold;
        margin-top: 10px;
        font-size: 16px;
    }

    .print-btn {
        margin-top: 30px;
        padding: 10px 20px;
        font-size: 16px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    @media print {
        .print-btn {
            display: none;
        }
    }
</style>

<div id="content-main" class="order-print">
    <h1>تفاصيل الطلب #{{ order.id }}</h1>
    
    <div class="customer-info">
        <h2>معلومات العميل</h2>
        <p><strong>الاسم:</strong> {{ order.customer.full_name }}</p>
        <p><strong>الهاتف:</strong> {{ order.customer.phone }}</p>
        <p><strong>العنوان:</strong> {{ order.customer.address }}</p>
        <p><strong>علامة مميزة:</strong> {{ order.customer.near_mark }}</p>
    </div>
    
    <div class="order-details">
        <h2>تفاصيل الطلب</h2>
        <table>
            <thead>
                <tr>
                    <th>المنتج</th>
                    <th>الكمية</th>
                    <th>السعر</th>
                    <th>المجموع</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items.all %}
                <tr>
                    <td>{{ item.product.title }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>{{ item.product.price_after_discount }} EGP</td>
                    <td>{{ item.get_total_price }} EGP</td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3"><strong>المجموع الكلي:</strong></td>
                    <td>{{ order.total_price }} EGP</td>
                </tr>
            </tfoot>
        </table>
    </div>
    
    <div class="order-status">
        <h2>حالة الطلب</h2>
        <p><strong>الحالة:</strong> {{ order.get_order_status_display }}</p>
        <p><strong>وقت الطلب:</strong> {{ order.placed_at }}</p>
    </div>
</div>

<button class="print-btn" onclick="window.print()">🖨️ طباعة الطلب</button>
{% endblock %}
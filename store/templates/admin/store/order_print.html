{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}Order #{{ order.id }}{% endblock %}

{% block content %}
<style>
    body {
        font-family: 'Cairo', sans-serif;
        direction: rtl;
        background-color: #fff;
        color: #333;
        padding: 40px;
    }

    h1 {
        font-size: 24px;
        margin-bottom: 10px;
        color: #444;
    }

    .section-title {
        font-size: 20px;
        margin-top: 30px;
        border-bottom: 2px solid #eee;
        padding-bottom: 5px;
        margin-bottom: 15px;
    }

    .info-block {
        margin-bottom: 10px;
    }

    .info-block strong {
        display: inline-block;
        width: 100px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }

    table th, table td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: center;
        font-size: 15px;
    }

    table th {
        background-color: #f5f5f5;
    }

    .table-footer {
        background-color: #222 !important;
        color: #fff !important;
        font-weight: bold;
    }

    .print-btn {
        margin-top: 30px;
        padding: 10px 25px;
        font-size: 16px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 6px;
        cursor: pointer;
    }

    @media print {
        .print-btn {
            display: none;
        }
    }
</style>

<h1>Order #{{ order.id }}</h1>
<p class="section-title">تفاصيل الطلب #{{ order.id }}</p>

<div class="section-title">معلومات العميل</div>
<div class="info-block"><strong>الاسم:</strong> {{ order.customer.full_name }}</div>
<div class="info-block"><strong>الهاتف:</strong> {{ order.customer.phone }}</div>
<div class="info-block"><strong>العنوان:</strong> {{ order.customer.address }}</div>
<div class="info-block"><strong>علامة مميزة:</strong> {{ order.customer.near_mark }}</div>

<div class="section-title">تفاصيل الطلب</div>
<table>
    <thead>
        <tr>
            <th>المنتج</th>
            <th>الكمية</th>
            <th>السعر</th>
            <th>المجموع</th>
        </tr>
    </thead>
    <tbody>
        {% for item in order.items.all %}
        <tr>
            <td>{{ item.product.title }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.product.price_after_discount|floatformat:2 }} EGP</td>
            <td>{{ item.get_total_price }} EGP</td>
        </tr>
        {% endfor %}
        <tr class="table-footer">
            <td colspan="3" style="text-align: right;">المجموع الكلي:</td>
            <td>{{ order.total_price|floatformat:2 }} EGP</td>
        </tr>
    </tbody>
</table>

<div class="section-title">حالة الطلب</div>
<div class="info-block"><strong>الحالة:</strong> {{ order.order_status }}</div>
<div class="info-block"><strong>وقت الطلب:</strong> {{ order.placed_at }}</div>

<button class="print-btn" onclick="window.print()">🖨️ طباعة الطلب</button>

{% endblock %}
